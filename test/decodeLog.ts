import {ERC1155ABI, ERC20Coder, ERC721ABI, ERC721Coder, Web3ABICoder} from "../index";
import {gemLogs} from "./abi/logs";

(async () => {
    const erc20Log = {
        data: "0x0000000000000000000000000000000000000000000000370c9b5ef669c35300",
        topics: [
            '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
            '0x000000000000000000000000b5cfcb4d4745cbbd252945856e1b6eaadcf2fc4e',
            '0x000000000000000000000000694c6aea9444876d4fa9375fc9089c370f8e9eda',
        ]
    }

    const logs = {
        "address": "0x00000000006c3852cbef3e08e8df289169ede581",
        "blockHash": "0xa414c390b94494678d1c0e7011cea5e6f6722f9b9f0c0c3430ae33fc143222c0",
        "blockNumber": "0xe8db82",
        "data": "0x527818e0fa8e40ca134af70d69b29f753313e2c80edfa011a3d1198087c69ae0000000000000000000000000fa0f7afd119a806b223f95578fd4ebfc1db4e5350000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000101884c6c941b1a70e2c5597f33889023db9da230000000000000000000000000000000000000000000000000000000000001d8300000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f8b0a10e4700000000000000000000000000084f6f9867ac2c4e8d990825d440cd6da1de3309f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071afd498d0000000000000000000000000008de9c5a032463c561423387a9648c5c7bcc5bc900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c6bf5263400000000000000000000000000046f84f7fa304a1ebfd875ce25f98091b59cb6c5a",
        "logIndex": "0x129",
        "removed": false,
        "topics": [
            "0x9d9af8e38d66c62e2c12f0225249fd9d721c54b83f48d9352c97c6cacdcb6f31",
            "0x00000000000000000000000084f6f9867ac2c4e8d990825d440cd6da1de3309f",
            "0x000000000000000000000000004c00500000ad104d7dbd00e3ae0a5c00560c00"
        ],
        "transactionHash": "0xb864007db13304e72b6309fa7407676730405afd8618e71dc85925e9fc7f2d6a",
        "transactionIndex": "0x193"
    }
    const sigHash = ERC20Coder.getFunctionSelector('totalSupply');

    // console.log(ERC20Coder.abiCode.decode(["address","uint256"],"0x00000000000000000000000000000000006c3852cbef3e08e8df289169ede58100000000000000000000000000000000000000000000000000233e2ffc2bfffa"))
    console.assert(sigHash[0].sighash == "0x18160ddd")

    const Erc1155 = [{
        "address": "0x495f947276749ce646f68ac8c248420045cb7b5e",
        "blockHash": "0x41743e90cb83d5da1837c17cbe4bae8adcdb36bbff6cb44307c6c95053ec926e",
        "blockNumber": "0xe4da5d",
        "data": "0x41b914f31a8ada38e00c8fb52d097bee43b0126500000000000001000000000a0000000000000000000000000000000000000000000000000000000000000001",
        "logIndex": "0xb5",
        "removed": false,
        "topics": [
            "0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62",
            "0x00000000000000000000000041b914f31a8ada38e00c8fb52d097bee43b01265",
            "0x00000000000000000000000041b914f31a8ada38e00c8fb52d097bee43b01265",
            "0x00000000000000000000000083c8f28c26bf6aaca652df1dbbe0e1b56f8baba2"
        ],
        "transactionHash": "0x6df889db9d8de9c75ac1bb82dfedfda4a9eab220cdf478ad8ee377e13ae0c891",
        "transactionIndex": "0x84"
    }]
    const transforEvents:unknown[] = []
    for (const log of Erc1155) {
        const erc20LogData = ERC721Coder.addABI(ERC1155ABI).decodeLog(log)
        if (erc20LogData.type !== "undecoded") {
            // console.log("ERC20", erc20LogData)
            transforEvents.push(erc20LogData)
        }
    }

    console.log(transforEvents.length, transforEvents)


    // const seaportCoder = new Web3ABICoder(Seaport.abi)

})()
